!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";function i(e){e.state.selectionPointer.rects=null,l(e)}function l(r){r.state.selectionPointer.willUpdate||(r.state.selectionPointer.willUpdate=!0,setTimeout(function(){var e=r,t=e.state.selectionPointer;if(t){if(null==t.rects&&null!=t.mouseX&&(t.rects=[],e.somethingSelected()))for(var o=e.display.selectionDiv.firstChild;o;o=o.nextSibling)t.rects.push(o.getBoundingClientRect());var n=!1;if(null!=t.mouseX)for(var i=0;i<t.rects.length;i++){var l=t.rects[i];l.left<=t.mouseX&&l.right>=t.mouseX&&l.top<=t.mouseY&&l.bottom>=t.mouseY&&(n=!0)}var s=n?t.value:"";e.display.lineDiv.style.cursor!=s&&(e.display.lineDiv.style.cursor=s)}r.state.selectionPointer.willUpdate=!1},50))}o.defineOption("selectionPointer",!1,function(n,e){var t=n.state.selectionPointer;t&&(o.off(n.getWrapperElement(),"mousemove",t.mousemove),o.off(n.getWrapperElement(),"mouseout",t.mouseout),o.off(window,"scroll",t.windowScroll),n.off("cursorActivity",i),n.off("scroll",i),n.state.selectionPointer=null,n.display.lineDiv.style.cursor=""),e&&(t=n.state.selectionPointer={value:"string"==typeof e?e:"default",mousemove:function(e){var t=n,o=t.state.selectionPointer;(null==e.buttons?e.which:e.buttons)?o.mouseX=o.mouseY=null:(o.mouseX=e.clientX,o.mouseY=e.clientY),l(t)},mouseout:function(e){var t;e=e,(t=n).getWrapperElement().contains(e.relatedTarget)||((e=t.state.selectionPointer).mouseX=e.mouseY=null,l(t))},windowScroll:function(){i(n)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},o.on(n.getWrapperElement(),"mousemove",t.mousemove),o.on(n.getWrapperElement(),"mouseout",t.mouseout),o.on(window,"scroll",t.windowScroll),n.on("cursorActivity",i),n.on("scroll",i))})});