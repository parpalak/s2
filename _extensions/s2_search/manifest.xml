<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE extension SYSTEM "ext-1.0.dtd">
<!--
/**
 * Search
 *
 * Adds full-text search with russian morphology to small sites.
 *
 * @copyright (C) 2011-2014 Roman Parpalak
 * @license http://www.gnu.org/licenses/gpl.html GPL version 2 or higher
 * @package s2_search
 */
-->

<extension for="S2" engine="1.0">
	<id>s2_search</id>
	<title>Search</title>
	<version>2.0dev</version>
	<description>Full-text search with Russian morphology. Designed for small sites.</description>
	<author>Roman Parpalak</author>

	<adminaffected>1</adminaffected>

	<minversion>2.0dev</minversion>
	<maxtestedon>2.0dev</maxtestedon>

	<note type="install">Do not forget to create search index after extension installation (Admin â†’ Stats page).</note>

	<install><![CDATA[
$s2_search_config = array(
	'S2_SEARCH_QUICK'		=> '0',
);

foreach ($s2_search_config as $conf_name => $conf_value)
{
	if (defined($conf_name))
		continue;

	$query = array(
		'INSERT'	=> 'name, value',
		'INTO'		=> 'config',
		'VALUES'	=> '\''.$conf_name.'\', \''.$conf_value.'\''
	);

	$s2_db->query_build($query);
}
	]]></install>

	<uninstall><![CDATA[
$query = array(
	'DELETE'	=> 'config',
	'WHERE'		=> 'name in (\'S2_SEARCH_QUICK\')',
);
$s2_db->query_build($query);
	]]></uninstall>
</extension>
